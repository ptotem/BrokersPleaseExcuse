<%= content_for :head do %>
    <script type="text/javascript">
        $(function () {
            var radio_selected = false;
            $(".chzn-select").chosen();
            $(".timepicker123").datetimepicker({dateFormat:'yy-mm-dd ', ampm:true});

        });

    </script>



    <style type="text/css">

        input, textarea, chzn-select, .chzn-container-single .chzn-single, .chzn-container-multi .chzn-choices, .blocky, input[type='checkbox'] {
            background: rgb(252, 234, 187); /* Old browsers */
            background: -moz-linear-gradient(top, rgb(252, 234, 187) 0%, rgb(252, 205, 77) 50%, rgb(251, 223, 147) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgb(252, 234, 187)), color-stop(50%, rgb(252, 205, 77)), color-stop(100%, rgb(251, 223, 147))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top, rgb(252, 234, 187) 0%, rgb(252, 205, 77) 50%, rgb(251, 223, 147) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top, rgb(252, 234, 187) 0%, rgb(252, 205, 77) 50%, rgb(251, 223, 147) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top, rgb(252, 234, 187) 0%, rgb(252, 205, 77) 50%, rgb(251, 223, 147) 100%); /* IE10+ */
            background: linear-gradient(top, rgb(252, 234, 187) 0%, rgb(252, 205, 77) 50%, rgb(251, 223, 147) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#fceabb', endColorstr = '#fbdf93', GradientType = 0); /* IE6-9 */
            color: black;
        }

        .chzn-container-multi .chzn-choices .search-field .default {
            color: black;
        }

        .topped {
            border-top: 1px solid #d3d3d3;
            padding-top: 5px;
            margin-top: 5px;
        }

        .blocky {
            border: solid 1px black;
            padding: 5px;
            margin-top: 3px;
            border-radius: 5px;
        }

        #mapa {
            width: 100%;
            height: 340px;
            border: 5px solid #DEEBF2;
        }


    </style>
<% end %>



<%= nested_form_for(@deal, :html => {:class => "contact_form"}) do |f| %>

    <div class="content">
      <div class="row-fluid">
        <div class="span4">
          <div class="row-fluid">
            <div class="span2">
              <%= f.label :flat_id %>

            </div>


            <div class="span3">
              <%= f.select :flat_id, options_from_collection_for_select(Flat.all, "id", "name"), :class => @required_class %>
            </div>
          </div>
          <div class="row-fluid">
            <div class="span2">
              <%= f.label :deal_date %>

            </div>
            <div class="span3">
              <%= f.text_field :deal_date, :class => "timepicker", :onclick => "$('.ui-datepicker').css('z-index','999999999');", :style => "font-size:12px;height:24px; padding-left:3px;background:white;" %>
            </div>
          </div>

          <div class="row-fluid">
            <div class="span2">
              <%= f.label :own_deal %>

            </div>
            <div class="span3">
              <%= f.check_box :own_deal, :checked => true %>
            </div>
          </div>


          <div class="row-fluid">
            <div class="span2">
              <%= f.label :deal_stage_id %>
            </div>

            <div class="span3">
              <%= f.select :deal_stage_id, options_from_collection_for_select(DealStage.all, "id", "name"), :class => @required_class %>
            </div>
          </div>


          <div class="row-fluid">
            <div class="span2">
              <%= f.label :from_date %>

            </div>
            <div class="span3">
              <%= f.text_field :from_date, :class => "timepicker", :onclick => "$('.ui-datepicker').css('z-index','999999999');", :style => "font-size:12px;height:24px; padding-left:3px;background:white;" %>
            </div>
          </div>
          <div class="row-fluid">
            <div class="span2">
              <%= f.label :to_date %>

            </div>
            <div class="span3">
              <%= f.text_field :to_date, :class => "timepicker", :onclick => "$('.ui-datepicker').css('z-index','999999999');", :style => "font-size:12px;height:24px; padding-left:3px;background:white;" %>
            </div>
          </div>
          <div class="row-fluid">
            <div class="span2">
              <%= f.label :lockin_date %>

            </div>
            <div class="span3">
              <%= f.text_field :lockin_date, :class => "timepicker", :onclick => "$('.ui-datepicker').css('z-index','999999999');", :style => "font-size:12px;height:24px; padding-left:3px;background:white;" %>
            </div>
          </div>


          <div class="row-fluid">
            <div class="span2">
              <%= f.label :landlord_commission %>

            </div>
            <div class="span3">
              <%= f.number_field :landlord_commission, :class => @required_class %>
            </div>
          </div>

          <div class="row-fluid">
            <div class="span2">
              <%= f.label :tenant_commission %>

            </div>
            <div class="span3">
              <%= f.number_field :tenant_commission, :class => @required_class %>
            </div>
          </div>
          <div class="row-fluid">
            <div class="span2">
              <%= f.label :expenses %>

            </div>
            <div class="span3">
              <%= f.number_field :expenses, :class => @required_class %>
            </div>
          </div>

          <div class="row-fluid">
            <div class="span2">
              <%= f.label :primary_rm_id %>

            </div>
            <div class="span3">
              <%= f.select :primary_rm_id,options_from_collection_for_select(ContactType.find_by_name("Employee").contacts,"id","name"), :class => @required_class %>
            </div>
          </div>
          </div>
        <div class="span6">


          <div class="row-fluid">
            <div class="span2">
              <%= f.label :package_details %>

            </div>
            <div class="span3">
              <%= f.text_area :package_details, :rows => 2, :style => "margin-left:0; width:90%;font-size:12px;padding:5px;" %>
            </div>
          </div>

          <div class="row-fluid">
            <div class="span2">
              <%= f.label :comments %>

            </div>
            <div class="span3">
              <%= f.text_area :comments, :rows => 2, :style => "margin-left:0; width:90%;font-size:12px;padding:5px;" %>
            </div>
          </div>
          <div class="row-fluid">
            <div class="span2">
              Select Brokers
            </div>
            <div class="span3">
              <%= select_tag 'Broker', options_from_collection_for_select(ContactType.find_by_name("Broker").contacts, 'id', "name",@brokers), :multiple => true, :class => 'chzn-container-multi' %>

            </div>
          </div>

          <div class="row-fluid">
            <div class="span2">
              Select Tenants

            </div>
            <div class="span3">
              <%= select_tag 'Tenant', options_from_collection_for_select(ContactType.find_by_name("Client").contacts, 'id', "name",@tenants), :multiple => true, :class => 'chzn-container-multi' %>
            </div>
          </div>
          <div class="row-fluid">
            <div class="span2">
              Select landlords
            </div>
            <div class="span3">
              <%= select_tag 'Landlord', options_from_collection_for_select(ContactType.find_by_name("Client").contacts, 'id', "name",@landlords), :multiple => true, :class => 'chzn-container-multi' %>

            </div>
          </div>


          <div class="row-fluid">
            <div class="span2">
              Select Employees

            </div>
            <div class="span3">
              <%= select_tag 'Employee', options_from_collection_for_select(ContactType.find_by_name("Employee").contacts, 'id', "name",@employees), :multiple => true, :class => 'chzn-container-multi' %>

            </div>

          </div>

          <a data-backdrop="static" data-toggle="modal" href="#add_contact" >Can't See whom you want ? Add them !</a>



        <div class="row-fluid">
          <br/>
          <%= f.submit "Submit", :class => "btn btn-inverse btn-large" %>

        </div>
        </div>


<% end %>

</div>
</div>
</div>
<script type="text/javascript">
    $(".timepicker").datetimepicker({
        dateFormat:'dd-mm-yy'
    });
    //    $(".multi-select-chosen0").chosen();
    //    $(".multi-select-chosen1").chosen();
    //    $(".multi-select-chosen2").chosen();
</script>


<div class="modal hide fade" id="add_contact">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">Ã—</a>

    <h3>Add a Contact</h3>
  </div>
  <div class="modal-body">
    <%= render 'contacts/form',:locals=>{} %>
  </div>
  <div class="modal-footer">
    <%#= b.submit "Save Changes", :class => "btn btn-primary" %>
    <a href="#" class="btn btn-danger" data-dismiss="modal">Close</a>
  </div>
</div>
