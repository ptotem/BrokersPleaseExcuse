<%= javascript_include_tag 'jquery' %>
<%= javascript_include_tag 'jquery-ui' %>
<%= javascript_include_tag 'jquery-ui-timepicker-addon' %>
<script type="text/javascript">
    var parameter = "";
    function create_additional_parameters() {
    <% if params[:controller]=="flats" %>
        parameter = "property_id=<%= params[:id] %>";
    <% elsif params[:controller]=="contacts" %>
        parameter = "contact_id=<%= params[:id] %>";
    <% end %>
    }

    //$.validator.setDefaults({ignore:[]});
    $(function () {
        //var validator=$('form').validate();

        $(".interaction-link").click(function () {
            var target_element = $(this).attr("href");
            create_additional_parameters();
            $.get("/interactions/new/?" + parameter, function (data) {
                $(target_element).children(".modal-body").html(data);
            });
        });


//          $('select.chzn-container-multi').chosen();


        $("form").live("nested:fieldAdded", function () {
            $(this).find("select").chosen();
        });

        $("form.submit_on_change").each(function (idx, form) {
            $(form).find("select.autosubmit").each(function (idx, element) {
                $(element).change(function () {
                    $(form).submit();
                    return false;
                });
            });
            return true;
        });

        $(".navbar .nav>li>a").popover({
            placement:'bottom',
            html:true
        });
        $(".menu-list>li>a").popover({
            placement:'right',
            html:true
        });
        $(".brand").popover({
            placement:'bottom',
            html:true
        });

    });
    //  $.datepicker.parseDate('mm-dd-yyyy', '01-26-2007');
</script>

